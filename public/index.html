<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Imperial Rocks</title>
    <link rel="stylesheet" href="LightCurves/lightgraph.css">
    <link rel="stylesheet" href="main.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link
            rel="stylesheet"
            href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css" rel="stylesheet">
    <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
</head>

<body>
<nav>
    <div class="nav-wrapper grey darken-4">
        <div class="logo">
            <img src="Assets/icss.svg" alt="ICSS">
        </div>
        <div>
            <h1 class="app-name">LumiRo.cc</h1>
        </div>
        <div class="name-container">
            <h2 class="team-name">Imperial Rocks! </h2>
            <h3 class="motto">Get it? </h3>
            <a class="modal-trigger" href="#modal1">
                <i class="material-icons">info</i>
            </a>
        </div>
    </div>
</nav>
<div class="contentWrapper grey darken-1">
    <div class="card grey darken-3">
        <div class="card-content">
            <div class="raytracer">
                <div class="buttons">
                    <button type="button" class="btn waves-effect waves-light grey darken-4"
                            onclick="buttonUpdate('Asteroid')">Asteroid
                    </button>
                    <button type="button" class="btn waves-effect waves-light grey darken-4"
                            onclick="buttonUpdate('Roadster')">Roadster
                    </button>
                    <button type="button" class="btn waves-effect waves-light grey darken-4" onclick="buttonUpdate('Duck')">
                        Duck
                    </button>
                    <button type="button" class="btn waves-effect waves-light grey darken-4"
                            onclick="buttonUpdate('Random')">Random
                    </button>
                </div>
                <div id="rtxCanvas" class="rtxCanvasWrapper">
                </div>
            </div>
        </div>
    </div>
    <div class="card grey darken-3 right">
        <div class="card-content controls">
            <div class="grapher">
                <div class="grapherGrapger">
                    <h2 class="graphTitle">Illuminance over time</h2>
                    <div class="lightGraphWrapper">
                        <canvas id="lightGraph"></canvas>
                    </div>
                </div>
            </div>
            <div class="sliders">
                <div class="xSlider slider">
                    <h3>X rotation: <span id="xout"></span></h3>
                    <div class="mdc-slider" id="x-slider">
                        <input class="mdc-slider__input" type="range" min="1" max="1000" value="500" name="volume" id="omegaX"
                               aria-label="Continuous slider demo">
                        <div class="mdc-slider__track">
                            <div class="mdc-slider__track--inactive"></div>
                            <div class="mdc-slider__track--active">
                                <div class="mdc-slider__track--active_fill"></div>
                            </div>
                        </div>
                        <div class="mdc-slider__thumb">
                            <div class="mdc-slider__thumb-knob"></div>
                        </div>
                    </div>
                </div>
                <div class="ySlider slider">
                    <h3>Y rotation: <span id="yout"></span></h3>
                    <div class="mdc-slider" id="y-slider">
                        <input class="mdc-slider__input" type="range" min="1" max="1000" value="600" name="volume" id="omegaY"
                               aria-label="Continuous slider demo">
                        <div class="mdc-slider__track">
                            <div class="mdc-slider__track--inactive"></div>
                            <div class="mdc-slider__track--active">
                                <div class="mdc-slider__track--active_fill"></div>
                            </div>
                        </div>
                        <div class="mdc-slider__thumb">
                            <div class="mdc-slider__thumb-knob"></div>
                        </div>
                    </div>
                </div>
                <div class="zSlider slider">
                    <h3>Z rotation: <span id="zout"></span></h3>

                    <div class="mdc-slider" id="z-slider">
                        <input class="mdc-slider__input" type="range" min="1" max="1000" value="500" name="volume" id="omegaZ"
                               aria-label="Continuous slider demo">
                        <div class="mdc-slider__track">
                            <div class="mdc-slider__track--inactive"></div>
                            <div class="mdc-slider__track--active">
                                <div class="mdc-slider__track--active_fill"></div>
                            </div>
                        </div>
                        <div class="mdc-slider__thumb">
                            <div class="mdc-slider__thumb-knob"></div>
                        </div>
                    </div>
                </div>
                <button type="button" class="waves-effect waves-light btn grey darken-4 random-rotation" onclick="pickRandomRotation()">
                    Random rotation
                </button>
            </div>
        </div>
    </div>
</div>
<!-- Modal Structure -->
<div id="modal1" class="modal grey darken-2">
    <div class="modal-content">
        <h4>Instructions</h4>
        <p>Try different models by clicking the buttons above the image.</p>
        <p>Scroll mouse wheel to change the direction of sunlight.</p>
        <p>Use sliders on the right to edit the rotation parameters of the object.</p>
        <p>Check out the code at <a href="https://github.com/ImperialSpaceSociety/NASASpaceApps2021-Rocks" target="_blank">Github</a>.</p>
        <p>Follow us on Twitter:
            <a href="https://twitter.com/matbogus" target="_blank">@matbogus</a>,
            <a href="https://twitter.com/VendaskyCZ" target="_blank">@VendaskyCZ</a>,
            <a href="https://twitter.com/PalicMichal" target="_blank">@PalicMichal</a> and
            <a href="https://twitter.com/JowMatias" target="_blank">@PalicMichal</a>
        </p>
    </div>
    <div class="modal-footer grey darken-2">
        <a href="#!" class="modal-close waves-effect waves-grey btn-flat">Close</a>
    </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js"></script>
<script src="https://unpkg.com/fast-average-color/dist/index.min.js"></script>
<script src="LightCurves/lightgraph.js"></script>
<script type="module" src="RotationViewer/js/newScene.js"></script>
<script src="Assets/buttons.js"></script>
<script src="Assets/sliders.js"></script>
<script>
    slider_change('xout', 'omegaX')
    slider_change('yout', 'omegaY')
    slider_change('zout', 'omegaZ')
</script>
<script>
    M.AutoInit();

    var xSlider = new mdc.slider.MDCSlider(document.querySelector('.mdc-slider#x-slider'));
    var ySlider = new mdc.slider.MDCSlider(document.querySelector('.mdc-slider#y-slider'));
    var zSlider = new mdc.slider.MDCSlider(document.querySelector('.mdc-slider#z-slider'));
    var lastXValue = xSlider.getValue();
    var lastYValue = ySlider.getValue();
    var lastZValue = zSlider.getValue();

    setInterval(() => {
        var xSliderValue = xSlider.getValue();
        var ySliderValue = ySlider.getValue();
        var zSliderValue = zSlider.getValue();

        if (lastXValue !== xSliderValue) {
            window.sliderXUpdate(xSliderValue);
            slider_change('xout', 'omegaX');
            lastXValue = xSliderValue;
        }

        if (lastYValue !== ySliderValue) {
            window.sliderYUpdate(ySliderValue);
            slider_change('yout', 'omegaY');
            lastYValue = ySliderValue;
        }

        if (lastZValue !== zSliderValue) {
            window.sliderZUpdate(zSliderValue);
            slider_change('zout', 'omegaZ');
            lastZValue = zSliderValue;
        }
    }, 50);

    window.pickRandomRotation = function() {
        xrot = Math.floor(Math.random() * 1000);
        xSlider.setValue(xrot);
        window.sliderXUpdate(xrot);

        yrot = Math.floor(Math.random() * 1000);
        ySlider.setValue(yrot);
        window.sliderYUpdate(yrot);

        zrot = Math.floor(Math.random() * 1000);
        zSlider.setValue(zrot);
        window.sliderZUpdate(zrot);
    };
</script>
</body>
</html>